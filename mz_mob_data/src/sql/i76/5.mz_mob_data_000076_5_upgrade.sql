-- MZMOB-818. Sinch SMSC Mediation Functions for Ireland Mobile
--Creating main input table. Based on current UK Sinch SMSC implementation

CREATE TABLE MZ_MOB_DATA_OWNER.CDR_INPUT_SMSC_SINCH_ROI
(
  TRANSACTION_ID                NUMBER          NOT NULL,
  CREATED_DATE                  DATE            DEFAULT sysdate               NOT NULL,
  INPUT_FILENAME                VARCHAR2(80 BYTE),
  A_NUMBER                      VARCHAR2(64 BYTE),
  B_NUMBER                      VARCHAR(64 BYTE),
  S_TYPE                        VARCHAR2(30 BYTE),
  DEST1                         VARCHAR2(30 BYTE),
  ORIG                          VARCHAR2(30 BYTE),
  ENTRY_TS                      VARCHAR2(30 BYTE),
  S_STATE                       VARCHAR2(30 BYTE),
  STATE_TS                      VARCHAR2(30 BYTE), 
  ATTEMPTS                      VARCHAR2(30 BYTE), 
  SRC_NAME                      VARCHAR2(30 BYTE),
  SRC_TYPE                      VARCHAR2(2 BYTE),
  SINK_NAME                     VARCHAR2(30 BYTE),
  SINK_TYPE                     VARCHAR2(1 BYTE),
  DATA_LEN                      VARCHAR2(30 BYTE),
  ORIG_MSC                      VARCHAR2(30 BYTE),
  SEQ_NUM                       VARCHAR2(30 BYTE),  
  RCPT_REQ                      VARCHAR2(1 BYTE),
  RCPT_REQ_LEVEL                VARCHAR2(3 BYTE),
  TARGET                        VARCHAR2(30 BYTE),
  ERROR                         VARCHAR2(3 BYTE),
  ORIG_TON                      VARCHAR2(1 BYTE),
  ORIG_NP                       VARCHAR2(1 BYTE),
  ORIG_IMSI                     VARCHAR2(30 BYTE),
  DEST_MSC                      VARCHAR2(30 BYTE),
  DEST_TON                      VARCHAR2(1 BYTE),
  DEST_NP                       VARCHAR2(1 BYTE),
  DEST_IMSI                     VARCHAR2(30 BYTE),
  ORIG_CHARGED                  VARCHAR2(30 BYTE),
  SERVICE_TYPE                  VARCHAR2(30 BYTE),
  DEST_MSISDN                   VARCHAR2(30 BYTE),
  REF_ID                        VARCHAR2(32 BYTE),
  CHARGING_RESULT               VARCHAR2(1 BYTE),
  ORIG_CHARGED_ID               VARCHAR2(20 BYTE),
  DIALLED_DEST_ADDR             VARCHAR2(30 BYTE),
  ADDITIONAL_ORIGCHARGEINFO     VARCHAR2(30 BYTE),
  ADDITIONAL_DESTCHARGEINFO     VARCHAR2(30 BYTE),
  VIRTUAL_SMSC_ID               VARCHAR2(30 BYTE),
  ROUTING_INDEX                 VARCHAR2(30 BYTE),
  REPLY_PATH_OR_STATUS_IND      VARCHAR2(1 BYTE),
  PROTOCOL_ID                   VARCHAR2(30 BYTE),
  DATA_CODING_SCHEME            VARCHAR2(2 BYTE),
  ESME_MESSAGE_ID               VARCHAR2(30 BYTE),
  ID                            VARCHAR2(32 BYTE),
  SUBMIT_LATEST_ATTEMPT_ERROR   VARCHAR2(30 BYTE),
  SEGMENT_ID                    VARCHAR2(30 BYTE),
  SEGMENT_REF                   VARCHAR2(30 BYTE),
  SEGMENT_TOTAL                 VARCHAR2(30 BYTE),
  RECORD_TYPE                   VARCHAR2(2 BYTE),
  ADDITIONAL_EXTRACHARGEINFO    VARCHAR2(30 BYTE),
  ANALYSIS                      VARCHAR2(30 BYTE),
  BILLING_IDENTIFIER            VARCHAR2(30 BYTE),
  CALLED_PARTY_GT               VARCHAR2(30 BYTE),
  CALLING_PARTY_GT              VARCHAR2(30 BYTE),
  CDR_LAYER_NAME                VARCHAR2(30 BYTE),
  CORRELATION_ID                VARCHAR2(30 BYTE),
  S_DEFERRED                    VARCHAR2(1 BYTE),
  DELIVERY_PRIORITY             VARCHAR2(1 BYTE),
  DEST_CHARGE_STATUS            VARCHAR2(1 BYTE),
  DEST2                         VARCHAR2(40 BYTE),
  DEST_LOCATION                 VARCHAR2(30 BYTE),
  DEST_MSC_EXISTS               VARCHAR2(1 BYTE),
  DEST_UE_ID                    VARCHAR2(30 BYTE),
  DIALLED_DEST_NP               VARCHAR2(1 BYTE),
  DIALLED_DEST_TON              VARCHAR2(1 BYTE),
  DIALLED_OR_DEST_ADDR          VARCHAR2(30 BYTE),
  DIALLED_OR_DEST_NP            VARCHAR2(1 BYTE),
  DIALLED_OR_DEST_TON           VARCHAR2(1 BYTE),
  EARLIEST_DELIVERY_TS          VARCHAR2(30 BYTE),
  ENTRY_DATE                    VARCHAR2(30 BYTE),
  ENTRY_TIME                    VARCHAR2(30 BYTE),
  ENTRY_TZH                     VARCHAR2(30 BYTE),
  ESME_ID                       VARCHAR2(30 BYTE),
  ESME_SPECIFIC_ERROR           VARCHAR2(30 BYTE),
  EXTRA_CHARGE_STATUS           VARCHAR2(1 BYTE),
  EXTRA_CHARGED_ID              VARCHAR2(30 BYTE),
  EXTRA_CHARGING_RESULT         VARCHAR2(1 BYTE),
  GATEWAY_ID                    VARCHAR2(30 BYTE),
  ID_12DEC                      VARCHAR2(30 BYTE),
  ID_HEXTODEC                   VARCHAR2(30 BYTE),
  MESSAGE_REFERENCE             VARCHAR2(30 BYTE),
  MESSAGING_MODE                VARCHAR2(30 BYTE), 
  MODIFIED_ORIG                 VARCHAR2(30 BYTE),
  MODIFIED_ORIG_OR_ORIG         VARCHAR2(30 BYTE),
  MODIFIED_ORIG_NP              VARCHAR2(1 BYTE),
  MODIFIED_ORIG_TON             VARCHAR2(1 BYTE),
  MODIFIED_ORIG_NP_OR_ORIG_NP   VARCHAR2(1 BYTE),
  MODIFIED_ORIG_NP_OR_ORIG_TON  VARCHAR2(1 BYTE),
  ORIG_CHARGE_STATUS            VARCHAR2(1 BYTE),
  ORIG_CHARGED_NOT_NULL         VARCHAR2(30 BYTE),
  ORIG_LOCATION                 VARCHAR2(30 BYTE),
  ORIG_UE_ID                    VARCHAR2(30 BYTE),
  ORIGINAL_STATUS_INFO          VARCHAR2(30 BYTE),
  QUARANTINED                   VARCHAR2(1 BYTE),
  REFUND_BILLING_IDENTIFIER_IND VARCHAR2(1 BYTE),
  SEQ_NUM_HEX                   VARCHAR2(30 BYTE),
  SERVICE_CENTRE_ADDRESS        VARCHAR2(30 BYTE),
  SM_DISTLIST                   VARCHAR2(30 BYTE),
  SRC_NAME_NEW                  VARCHAR2(30 BYTE),
  SRI_CALLING_PARTY_GT          VARCHAR2(30 BYTE),
  STATE_TZH                     VARCHAR2(30 BYTE),
  SUBMIT_LATEST_ATT_ORIG_ERROR  VARCHAR2(30 BYTE),
  SUPER_ID                      VARCHAR2(30 BYTE),
  USER_PROVIDED_ID              VARCHAR2(30 BYTE)
)
SEGMENT CREATION IMMEDIATE
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  TABLESPACE MZ_MOB_CDR_DATA
partition by range(CREATED_DATE)
(
  PARTITION PMAXVALUE  VALUES LESS THAN (MAXVALUE) TABLESPACE  MZ_MOB_CDR_DATA);
  
  -- Create the indexes in the CDR_INPUT_SMSC_SINCH_ROI table

CREATE INDEX CDR_INPUT_SMSC_SINCH_ROI_IDX1 ON CDR_INPUT_SMSC_SINCH_ROI (ORIG) LOCAL;

CREATE INDEX CDR_INPUT_SMSC_SINCH_ROI_IDX2 ON CDR_INPUT_SMSC_SINCH_ROI (DEST1) LOCAL;

CREATE INDEX CDR_INPUT_SMSC_SINCH_ROI_IDX3 ON CDR_INPUT_SMSC_SINCH_ROI (CREATED_DATE) LOCAL;

CREATE INDEX CDR_INPUT_SMSC_SINCH_ROI_IDX4 ON CDR_INPUT_SMSC_SINCH_ROI (TRANSACTION_ID) LOCAL;
