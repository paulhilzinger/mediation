-- Recreate the TAP input table and add SERVING_NETWORK - MZMOB-109
--
DROP TABLE CDR_INPUT_TAP;

CREATE TABLE CDR_INPUT_TAP
(
  TRANSACTION_ID      NUMBER	NOT NULL,
  CREATED_DATE        DATE	DEFAULT	sysdate               NOT NULL,
  INPUT_FILENAME      VARCHAR2(50),
  SOURCE_TADIG        VARCHAR2(10),
  CALL_EVENT_TYPE     VARCHAR2(5),
  CHARGEABLE_IMSI     VARCHAR2(30),
  CHARGEABLE_MSISDN   VARCHAR2(30),
  CHARGEABLE_IMEI     VARCHAR2(30),
  CALLED_NUMBER       VARCHAR2(30),
  DIALLED_DIGITS      VARCHAR2(30),
  CALLING_NUMBER      VARCHAR2(30),
  THIRD_PTY_NUMBER    VARCHAR2(30),
  SMS_NUMBER          VARCHAR2(30),
  A_NUMBER            VARCHAR2(30),
  B_NUMBER            VARCHAR2(30),
  START_TIME          VARCHAR2(30),
  DURATION            VARCHAR2(30),
  CAUSE_FOR_TERM      VARCHAR2(30),
  CALL_REFERENCE      VARCHAR2(30),
  REC_ENT_TYPE        VARCHAR2(30),
  REC_ENT_ID          VARCHAR2(100),
  LAC                 VARCHAR2(30),
  CI                  VARCHAR2(30),
  SERVING_NETWORK     VARCHAR2(30),
  CHARGE              VARCHAR2(30),
  SERVICE_CODE        VARCHAR2(30),
  CAMEL_SERVICE_KEY   VARCHAR2(30),
  CAMEL_DESTINATION   VARCHAR2(30),
  SS_CODE             VARCHAR2(30),
  SS_ACTION           VARCHAR2(30),
  SS_PARAMS           VARCHAR2(30),
  CHARGED_PTY_STATUS  VARCHAR2(30),
  NON_CHARGED_NUMBER  VARCHAR2(30),
  ORIG_NETWORK        VARCHAR2(30),
  DEST_NETWORK        VARCHAR2(30),
  PDP_ADDRESS         VARCHAR2(100),
  APN_NI              VARCHAR2(30),
  APN_OI              VARCHAR2(30),
  CHARGING_ID         VARCHAR2(30),
  DATA_VOL_IN         VARCHAR2(30),
  DATA_VOL_OUT        VARCHAR2(30)
)
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;

CREATE INDEX CDR_INPUT_TAP_IDX1 ON CDR_INPUT_TAP(A_NUMBER);

CREATE INDEX CDR_INPUT_TAP_IDX2 ON CDR_INPUT_TAP(B_NUMBER);


-- Recreate the PGW input table and add RAT types to the 10 RATING_GROUP blocks - MZMOB-110
--
DROP TABLE CDR_INPUT_PGW;

CREATE TABLE CDR_INPUT_PGW
(
  TRANSACTION_ID     NUMBER(15)                 NOT NULL,
  CREATED_DATE       DATE                       DEFAULT sysdate               NOT NULL,
  INPUT_FILENAME     VARCHAR2(80),
  MSISDN             VARCHAR2(30),
  IMSI               VARCHAR2(20),
  IMEISV             VARCHAR2(20),
  RAT                INTEGER,
  RECORDOPENINGTIME  VARCHAR2(30),
  REC_OPEN_TIME_UTC  DATE,
  MSTZ               VARCHAR2(10),
  DURATION           NUMBER(15),
  CAUSE_REC_CLOSE    INTEGER,
  CHARGINGID         INTEGER,
  LOCAL_SEQ_NUM      INTEGER,
  SEQ_NUM            INTEGER,
  APN                VARCHAR2(80),
  ULI_ORIGINAL       VARCHAR2(50),
  MCC                VARCHAR2(5),
  MNC                VARCHAR2(5),
  LAC                VARCHAR2(10),
  CI                 VARCHAR2(10),
  SAC                VARCHAR2(20),
  RAC                VARCHAR2(5),
  TAC                VARCHAR2(20),
  ECI                VARCHAR2(20),
  SERVING_NODE_TYPE  VARCHAR2(5),
  IPADD              VARCHAR2(50),
  STARTTIME          VARCHAR2(30),
  STOPTIME           VARCHAR2(30),
  QOS_REQ1           VARCHAR2(100),
  QOS_NEG1           VARCHAR2(100),
  UPVOL1             NUMBER(20),
  DOWNVOL1           NUMBER(20),
  CHANGE_CONDITION1  NUMBER(5),
  CHANGE_TIME1       VARCHAR2(30),
  ULI_ORIG1          VARCHAR2(50),
  MCC1               VARCHAR2(5),
  MNC1               VARCHAR2(5),
  LAC1               VARCHAR2(10),
  CI1                VARCHAR2(10),
  SAC1               VARCHAR2(20),
  RAC1               VARCHAR2(5),
  TAC1               VARCHAR2(20),
  ECI1               VARCHAR2(20),
  QOS_REQ2           VARCHAR2(100),
  QOS_NEG2           VARCHAR2(100),
  UPVOL2             NUMBER(20),
  DOWNVOL2           NUMBER(20),
  CHANGE_CONDITION2  NUMBER(5),
  CHANGE_TIME2       VARCHAR2(30),
  ULI_ORIG2          VARCHAR2(50),
  MCC2               VARCHAR2(5),
  MNC2               VARCHAR2(5),
  LAC2               VARCHAR2(10),
  CI2                VARCHAR2(10),
  SAC2               VARCHAR2(20),
  RAC2               VARCHAR2(5),
  TAC2               VARCHAR2(20),
  ECI2               VARCHAR2(20),
  QOS_REQ3           VARCHAR2(100),
  QOS_NEG3           VARCHAR2(100),
  UPVOL3             NUMBER(20),
  DOWNVOL3           NUMBER(20),
  CHANGE_CONDITION3  NUMBER(5),
  CHANGE_TIME3       VARCHAR2(30),
  ULI_ORIG3          VARCHAR2(50),
  MCC3               VARCHAR2(5),
  MNC3               VARCHAR2(5),
  LAC3               VARCHAR2(10),
  CI3                VARCHAR2(10),
  SAC3               VARCHAR2(20),
  RAC3               VARCHAR2(5),
  TAC3               VARCHAR2(20),
  ECI3               VARCHAR2(20),
  QOS_REQ4           VARCHAR2(100),
  QOS_NEG4           VARCHAR2(100),
  UPVOL4             NUMBER(20),
  DOWNVOL4           NUMBER(20),
  CHANGE_CONDITION4  NUMBER(5),
  CHANGE_TIME4       VARCHAR2(30),
  ULI_ORIG4          VARCHAR2(50),
  MCC4               VARCHAR2(5),
  MNC4               VARCHAR2(5),
  LAC4               VARCHAR2(10),
  CI4                VARCHAR2(10),
  SAC4               VARCHAR2(20),
  RAC4               VARCHAR2(5),
  TAC4               VARCHAR2(20),
  ECI4               VARCHAR2(20),
  QOS_REQ5           VARCHAR2(100),
  QOS_NEG5           VARCHAR2(100),
  UPVOL5             NUMBER(20),
  DOWNVOL5           NUMBER(20),
  CHANGE_CONDITION5  NUMBER(5),
  CHANGE_TIME5       VARCHAR2(30),
  ULI_ORIG5          VARCHAR2(50),
  MCC5               VARCHAR2(5),
  MNC5               VARCHAR2(5),
  LAC5               VARCHAR2(10),
  CI5                VARCHAR2(10),
  SAC5               VARCHAR2(20),
  RAC5               VARCHAR2(5),
  TAC5               VARCHAR2(20),
  ECI5               VARCHAR2(20),
  RATING_GRP1        INTEGER,
  FIRST_USAGE1       VARCHAR2(30),
  LAST_USAGE1        VARCHAR2(30),
  SVC_COND_CHANGE1   VARCHAR2(40),
  SVCUPVOL1          NUMBER(20),
  SVCDOWNVOL1        NUMBER(20),
  RAT1               INTEGER,  
  LOCAL_SEQ_NUM1     NUMBER(20),
  RATING_GRP2        INTEGER,
  FIRST_USAGE2       VARCHAR2(30),
  LAST_USAGE2        VARCHAR2(30),
  SVC_COND_CHANGE2   VARCHAR2(40),
  SVCUPVOL2          NUMBER(20),
  SVCDOWNVOL2        NUMBER(20),
  RAT2               INTEGER,  
  LOCAL_SEQ_NUM2     NUMBER(20),
  RATING_GRP3        INTEGER,
  FIRST_USAGE3       VARCHAR2(30),
  LAST_USAGE3        VARCHAR2(30),
  SVC_COND_CHANGE3   VARCHAR2(40),
  SVCUPVOL3          NUMBER(20),
  SVCDOWNVOL3        NUMBER(20),
  RAT3               INTEGER,  
  LOCAL_SEQ_NUM3     NUMBER(20),
  RATING_GRP4        INTEGER,
  FIRST_USAGE4       VARCHAR2(30),
  LAST_USAGE4        VARCHAR2(30),
  SVC_COND_CHANGE4   VARCHAR2(40),
  SVCUPVOL4          NUMBER(20),
  SVCDOWNVOL4        NUMBER(20),
  RAT4               INTEGER,  
  LOCAL_SEQ_NUM4     NUMBER(20),
  RATING_GRP5        INTEGER,
  FIRST_USAGE5       VARCHAR2(30),
  LAST_USAGE5        VARCHAR2(30),
  SVC_COND_CHANGE5   VARCHAR2(40),
  SVCUPVOL5          NUMBER(20),
  SVCDOWNVOL5        NUMBER(20),
  RAT5               INTEGER,  
  LOCAL_SEQ_NUM5     NUMBER(20),
  RATING_GRP6        INTEGER,
  FIRST_USAGE6       VARCHAR2(30),
  LAST_USAGE6        VARCHAR2(30),
  SVC_COND_CHANGE6   VARCHAR2(40),
  SVCUPVOL6          NUMBER(20),
  SVCDOWNVOL6        NUMBER(20),
  RAT6               INTEGER,  
  LOCAL_SEQ_NUM6     NUMBER(20),
  RATING_GRP7        INTEGER,
  FIRST_USAGE7       VARCHAR2(30),
  LAST_USAGE7        VARCHAR2(30),
  SVC_COND_CHANGE7   VARCHAR2(40),
  SVCUPVOL7          NUMBER(20),
  SVCDOWNVOL7        NUMBER(20),
  RAT7               INTEGER,  
  LOCAL_SEQ_NUM7     NUMBER(20),
  RATING_GRP8        INTEGER,
  FIRST_USAGE8       VARCHAR2(30),
  LAST_USAGE8        VARCHAR2(30),
  SVC_COND_CHANGE8   VARCHAR2(40),
  SVCUPVOL8          NUMBER(20),
  SVCDOWNVOL8        NUMBER(20),
  RAT8               INTEGER,  
  LOCAL_SEQ_NUM8     NUMBER(20),
  RATING_GRP9        INTEGER,
  FIRST_USAGE9       VARCHAR2(30),
  LAST_USAGE9        VARCHAR2(30),
  SVC_COND_CHANGE9   VARCHAR2(40),
  SVCUPVOL9          NUMBER(20),
  SVCDOWNVOL9        NUMBER(20),
  RAT9               INTEGER,  
  LOCAL_SEQ_NUM9     NUMBER(20),
  RATING_GRP10       INTEGER,
  FIRST_USAGE10      VARCHAR2(30),
  LAST_USAGE10       VARCHAR2(30),
  SVC_COND_CHANGE10  VARCHAR2(40),
  SVCUPVOL10         NUMBER(20),
  SVCDOWNVOL10       NUMBER(20),
  RAT10              INTEGER,  
  LOCAL_SEQ_NUM10    NUMBER(20)  
)
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;

CREATE INDEX CDR_INPUT_PGW_IDX1 ON CDR_INPUT_PGW(MSISDN);